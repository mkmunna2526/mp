<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - Luxe Parfum</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300;400;600;700&family=Montserrat:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-gold: #D4AF37;
            --dark-bg: #1a1a1a;
            --light-text: #f5f5f5;
            --accent-red: #e74c3c;
            --card-bg: #2a2a2a;
            --border-gold: #b8960f;
            --success-green: #27ae60;
        }

        body {
            font-family: 'Montserrat', sans-serif;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 100%);
            color: var(--light-text);
            display: flex;
            min-height: 100vh;
        }

        .sidebar {
            width: 280px;
            background: var(--card-bg);
            height: 100vh;
            position: fixed;
            left: 0;
            top: 0;
            padding: 30px 0;
            border-right: 2px solid rgba(212, 175, 55, 0.2);
            overflow-y: auto;
        }

        .sidebar-logo {
            font-family: 'Cormorant Garamond', serif;
            font-size: 28px;
            font-weight: 700;
            color: var(--primary-gold);
            text-align: center;
            margin-bottom: 50px;
            letter-spacing: 2px;
        }

        .sidebar-menu {
            list-style: none;
        }

        .sidebar-menu li {
            margin-bottom: 5px;
        }

        .sidebar-menu a {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px 30px;
            color: var(--light-text);
            text-decoration: none;
            transition: all 0.3s;
            border-left: 3px solid transparent;
        }

        .sidebar-menu a:hover,
        .sidebar-menu a.active {
            background: rgba(212, 175, 55, 0.1);
            border-left-color: var(--primary-gold);
            color: var(--primary-gold);
        }

        .sidebar-menu i {
            font-size: 20px;
            width: 25px;
        }

        .main-content {
            margin-left: 280px;
            flex: 1;
            padding: 30px;
            min-height: 100vh;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 2px solid rgba(212, 175, 55, 0.2);
        }

        .header h1 {
            font-family: 'Cormorant Garamond', serif;
            font-size: 36px;
            color: var(--primary-gold);
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .user-avatar {
            width: 45px;
            height: 45px;
            background: var(--primary-gold);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: var(--dark-bg);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        .stat-card {
            background: var(--card-bg);
            padding: 30px;
            border-radius: 15px;
            border: 2px solid rgba(212, 175, 55, 0.2);
            transition: all 0.3s;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            border-color: var(--primary-gold);
        }

        .stat-icon {
            width: 60px;
            height: 60px;
            background: rgba(212, 175, 55, 0.2);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            color: var(--primary-gold);
            margin-bottom: 20px;
        }

        .stat-value {
            font-size: 32px;
            font-weight: bold;
            color: var(--primary-gold);
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 14px;
            opacity: 0.8;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .table-container {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 30px;
            border: 2px solid rgba(212, 175, 55, 0.2);
            margin-bottom: 30px;
        }

        .table-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }

        .table-header h2 {
            font-family: 'Cormorant Garamond', serif;
            font-size: 28px;
            color: var(--primary-gold);
        }

        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            font-family: 'Montserrat', sans-serif;
        }

        .btn-primary {
            background: var(--primary-gold);
            color: var(--dark-bg);
        }

        .btn-primary:hover {
            background: var(--border-gold);
            transform: scale(1.05);
        }

        .btn-success {
            background: var(--success-green);
            color: white;
        }

        .btn-danger {
            background: var(--accent-red);
            color: white;
        }

        .btn-sm {
            padding: 8px 15px;
            font-size: 14px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        thead {
            background: rgba(212, 175, 55, 0.1);
        }

        th {
            padding: 15px;
            text-align: left;
            font-weight: 600;
            color: var(--primary-gold);
            text-transform: uppercase;
            font-size: 12px;
            letter-spacing: 1px;
        }

        td {
            padding: 15px;
            border-bottom: 1px solid rgba(212, 175, 55, 0.1);
        }

        tbody tr {
            transition: all 0.3s;
        }

        tbody tr:hover {
            background: rgba(212, 175, 55, 0.05);
        }

        .status-badge {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .status-new {
            background: rgba(52, 152, 219, 0.2);
            color: #3498db;
        }

        .status-paid {
            background: rgba(39, 174, 96, 0.2);
            color: #27ae60;
        }

        .status-shipped {
            background: rgba(155, 89, 182, 0.2);
            color: #9b59b6;
        }

        .status-crypto {
            background: rgba(243, 156, 18, 0.2);
            color: #f39c12;
        }

        .action-buttons {
            display: flex;
            gap: 8px;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 2000;
            overflow-y: auto;
        }

        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.3s;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            background: var(--card-bg);
            border-radius: 20px;
            max-width: 600px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            padding: 40px;
            position: relative;
            border: 2px solid var(--primary-gold);
            animation: slideUp 0.3s;
        }

        @keyframes slideUp {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .modal-close {
            position: absolute;
            top: 20px;
            right: 20px;
            background: var(--accent-red);
            border: none;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 20px;
            transition: all 0.3s;
        }

        .modal-close:hover {
            transform: rotate(90deg);
        }

        .modal h2 {
            font-family: 'Cormorant Garamond', serif;
            font-size: 32px;
            color: var(--primary-gold);
            margin-bottom: 30px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--primary-gold);
        }

        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 12px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(212, 175, 55, 0.3);
            border-radius: 8px;
            color: var(--light-text);
            font-family: 'Montserrat', sans-serif;
            font-size: 14px;
        }

        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            outline: none;
            border-color: var(--primary-gold);
        }

        .form-group textarea {
            resize: vertical;
            min-height: 100px;
        }

        .language-inputs {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .search-bar {
            margin-bottom: 20px;
        }

        .search-bar input {
            width: 100%;
            padding: 12px 40px 12px 15px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(212, 175, 55, 0.3);
            border-radius: 8px;
            color: var(--light-text);
            font-family: 'Montserrat', sans-serif;
        }

        .section {
            display: none;
        }

        .section.active {
            display: block;
        }

        .product-image-preview {
            width: 50px;
            height: 50px;
            object-fit: cover;
            border-radius: 8px;
        }

        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
                transition: transform 0.3s;
            }

            .sidebar.active {
                transform: translateX(0);
            }

            .main-content {
                margin-left: 0;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .language-inputs {
                grid-template-columns: 1fr;
            }
        }

        @keyframes slideIn {
            from { transform: translateX(400px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        @keyframes slideOut {
            from { transform: translateX(0); opacity: 1; }
            to { transform: translateX(400px); opacity: 0; }
        }
    </style>
</head>
<body>
    <aside class="sidebar">
        <div class="sidebar-logo">LUXE PARFUM</div>
        <ul class="sidebar-menu">
            <li><a href="#" class="active" onclick="showSection('dashboard')"><i class="fas fa-home"></i> Dashboard</a></li>
            <li><a href="#" onclick="showSection('products')"><i class="fas fa-box"></i> Products</a></li>
            <li><a href="#" onclick="showSection('orders')"><i class="fas fa-shopping-cart"></i> Orders</a></li>
            <li><a href="#" onclick="showSection('customers')"><i class="fas fa-users"></i> Customers</a></li>
            <li><a href="#" onclick="showSection('settings')"><i class="fas fa-cog"></i> Settings</a></li>
            <li><a href="index.html" target="_blank"><i class="fas fa-store"></i> View Store</a></li>
        </ul>
    </aside>

    <main class="main-content">
        <div class="header">
            <h1>Admin Dashboard</h1>
            <div class="user-info">
                <div class="user-avatar">AD</div>
                <div>
                    <div style="font-weight: 600;">Admin User</div>
                    <div style="font-size: 12px; opacity: 0.7;">admin@luxeparfum.com</div>
                </div>
            </div>
        </div>

        <!-- Dashboard Section -->
        <section id="dashboard" class="section active">
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon"><i class="fas fa-euro-sign"></i></div>
                    <div class="stat-value" id="totalRevenue">€0</div>
                    <div class="stat-label">Total Revenue</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon"><i class="fas fa-shopping-cart"></i></div>
                    <div class="stat-value" id="totalOrders">0</div>
                    <div class="stat-label">Total Orders</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon"><i class="fas fa-box"></i></div>
                    <div class="stat-value" id="totalProducts">5</div>
                    <div class="stat-label">Total Products</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon"><i class="fas fa-users"></i></div>
                    <div class="stat-value" id="totalCustomers">0</div>
                    <div class="stat-label">Total Customers</div>
                </div>
            </div>

            <div class="table-container">
                <div class="table-header">
                    <h2>Recent Orders</h2>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>Order ID</th>
                            <th>Customer</th>
                            <th>Products</th>
                            <th>Total</th>
                            <th>Status</th>
                            <th>Date</th>
                        </tr>
                    </thead>
                    <tbody id="recentOrdersTable">
                        <tr>
                            <td colspan="6" style="text-align: center; opacity: 0.6;">No orders yet</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Products Section -->
        <section id="products" class="section">
            <div class="table-container">
                <div class="table-header">
                    <h2>Products Management</h2>
                    <button class="btn btn-primary" onclick="openAddProductModal()">
                        <i class="fas fa-plus"></i> Add New Product
                    </button>
                </div>
                <div class="search-bar">
                    <input type="text" placeholder="Search products..." id="productSearch" onkeyup="filterProducts()">
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>Product</th>
                            <th>Brand</th>
                            <th>Original Price</th>
                            <th>Sale Price</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="productsTable"></tbody>
                </table>
            </div>
        </section>

        <!-- Orders Section -->
        <section id="orders" class="section">
            <div class="table-container">
                <div class="table-header">
                    <h2>Orders Management</h2>
                </div>
                <div class="search-bar">
                    <input type="text" placeholder="Search orders..." id="orderSearch" onkeyup="filterOrders()">
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>Order ID</th>
                            <th>Customer</th>
                            <th>Email</th>
                            <th>Total</th>
                            <th>Payment</th>
                            <th>Status</th>
                            <th>Date</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="ordersTable">
                        <tr>
                            <td colspan="8" style="text-align: center; opacity: 0.6;">No orders found</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Customers Section -->
        <section id="customers" class="section">
            <div class="table-container">
                <div class="table-header">
                    <h2>Customers</h2>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Email</th>
                            <th>Orders</th>
                            <th>Total Spent</th>
                            <th>Join Date</th>
                        </tr>
                    </thead>
                    <tbody id="customersTable">
                        <tr>
                            <td colspan="5" style="text-align: center; opacity: 0.6;">No customers yet</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Settings Section -->
        <section id="settings" class="section">
            <div class="table-container">
                <div class="table-header">
                    <h2>Store Settings</h2>
                </div>
                <form id="settingsForm">
                    <div class="form-group">
                        <label>Store Name</label>
                        <input type="text" value="Luxe Parfum" id="storeName">
                    </div>
                    <div class="form-group">
                        <label>Store Email</label>
                        <input type="email" value="info@luxeparfum.com" id="storeEmail">
                    </div>
                    <div class="form-group">
                        <label>Contact Phone</label>
                        <input type="tel" value="+49 123 456 7890" id="storePhone">
                    </div>
                    <div class="form-group">
                        <label>Telegram Bot Token</label>
                        <input type="text" placeholder="Enter your Telegram Bot Token" id="telegramToken">
                    </div>
                    <div class="form-group">
                        <label>Telegram Chat ID</label>
                        <input type="text" placeholder="Enter your Telegram Chat ID" id="telegramChatId">
                    </div>
                    <button type="submit" class="btn btn-primary">Save Settings</button>
                </form>
            </div>
        </section>
    </main>

    <!-- Add/Edit Product Modal -->
    <div class="modal" id="productModal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeProductModal()">×</button>
            <h2 id="modalTitle">Add New Product</h2>
            <form id="productForm">
                <div class="form-group">
                    <label>Brand</label>
                    <input type="text" id="productBrand" required>
                </div>
                <div class="form-group">
                    <label>Product Names (Multilingual)</label>
                    <div class="language-inputs">
                        <input type="text" placeholder="English" id="productNameEn" required>
                        <input type="text" placeholder="German" id="productNameDe" required>
                        <input type="text" placeholder="Spanish" id="productNameEs" required>
                        <input type="text" placeholder="French" id="productNameFr" required>
                    </div>
                </div>
                <div class="form-group">
                    <label>Description (English)</label>
                    <textarea id="productDescEn" required></textarea>
                </div>
                <div class="form-group">
                    <label>Description (German)</label>
                    <textarea id="productDescDe" required></textarea>
                </div>
                <div class="form-group">
                    <label>Description (Spanish)</label>
                    <textarea id="productDescEs" required></textarea>
                </div>
                <div class="form-group">
                    <label>Description (French)</label>
                    <textarea id="productDescFr" required></textarea>
                </div>
                <div class="form-group">
                    <label>Original Price (€)</label>
                    <input type="number" id="productOriginalPrice" step="0.01" required>
                </div>
                <div class="form-group">
                    <label>Sale Price (€) - 50% of Original</label>
                    <input type="number" id="productSalePrice" step="0.01" readonly>
                </div>
                <div class="form-group">
                    <label>Product Image URL</label>
                    <input type="url" id="productImage" placeholder="https://example.com/image.jpg" required>
                    <small style="opacity: 0.7; font-size: 12px; display: block; margin-top: 5px;">Enter direct image URL (Unsplash, Imgur, etc.)</small>
                </div>
                <div class="form-group">
                    <label>Available Volumes (comma-separated)</label>
                    <input type="text" id="productVolumes" placeholder="30ml, 50ml, 100ml" required>
                </div>
                <button type="submit" class="btn btn-primary">Save Product</button>
            </form>
        </div>
    </div>

    <!-- Order Details Modal -->
    <div class="modal" id="orderModal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeOrderModal()">×</button>
            <h2>Order Details</h2>
            <div id="orderDetails"></div>
        </div>
    </div>

    <script>
        let products = [
            {
                id: 1,
                name: { en: "Élixir de Nuit", de: "Nacht Elixier", es: "Elixir de Noche", fr: "Élixir de Nuit" },
                brand: "MAISON D'OR",
                description: {
                    en: "A captivating evening fragrance with notes of amber, vanilla, and sandalwood.",
                    de: "Ein fesselnder Abendduft mit Noten von Amber, Vanille und Sandelholz.",
                    es: "Una fragancia nocturna cautivadora con notas de ámbar, vainilla y sándalo.",
                    fr: "Un parfum de soirée captivant avec des notes d'ambre, de vanille et de bois de santal."
                },
                originalPrice: 120,
                discountedPrice: 60,
                volumes: ["30ml", "50ml", "100ml"],
                image: "https://images.unsplash.com/photo-1594035910387-fea47794261f?w=500&h=500&fit=crop",
                status: "active"
            },
            {
                id: 2,
                name: { en: "Golden Bloom", de: "Goldene Blüte", es: "Floración Dorada", fr: "Fleur d'Or" },
                brand: "ATELIER LUXE",
                description: {
                    en: "Fresh floral composition with jasmine, rose, and citrus notes.",
                    de: "Frische Blütenkomposition mit Jasmin, Rose und Zitrusnoten.",
                    es: "Composición floral fresca con notas de jazmín, rosa y cítricos.",
                    fr: "Composition florale fraîche avec des notes de jasmin, de rose et d'agrumes."
                },
                originalPrice: 140,
                discountedPrice: 70,
                volumes: ["50ml", "100ml"],
                image: "https://images.unsplash.com/photo-1615634260167-c8cdede054de?w=500&h=500&fit=crop",
                status: "active"
            },
            {
                id: 3,
                name: { en: "Mystic Forest", de: "Mystischer Wald", es: "Bosque Místico", fr: "Forêt Mystique" },
                brand: "NOIR ESSENCE",
                description: {
                    en: "Deep woody fragrance with cedar, pine, and leather notes.",
                    de: "Tiefer holziger Duft mit Zeder, Kiefer und Ledernoten.",
                    es: "Fragancia amaderada profunda con notas de cedro, pino y cuero.",
                    fr: "Parfum boisé profond avec des notes de cèdre, de pin et de cuir."
                },
                originalPrice: 160,
                discountedPrice: 80,
                volumes: ["50ml", "100ml"],
                image: "https://images.unsplash.com/photo-1587017539504-67cfbddac569?w=500&h=500&fit=crop",
                status: "active"
            },
            {
                id: 4,
                name: { en: "Ocean Breeze", de: "Meeresbrise", es: "Brisa del Océano", fr: "Brise Océanique" },
                brand: "AZURE NOTES",
                description: {
                    en: "Light aquatic fragrance with marine notes, bergamot, and white musk.",
                    de: "Leichter aquatischer Duft mit Meeres noten, Bergamotte und weißem Moschus.",
                    es: "Fragancia acuática ligera con notas marinas, bergamota y almizcle blanco.",
                    fr: "Parfum aquatique léger avec des notes marines, de bergamote et de musc blanc."
                },
                originalPrice: 100,
                discountedPrice: 50,
                volumes: ["30ml", "50ml", "100ml"],
                image: "https://images.unsplash.com/photo-1595425970377-c9703cf48b6d?w=500&h=500&fit=crop",
                status: "active"
            },
            {
                id: 5,
                name: { en: "Rose Éternelle", de: "Ewige Rose", es: "Rosa Eterna", fr: "Rose Éternelle" },
                brand: "BELLE ESSENCE",
                description: {
                    en: "An exquisite rose fragrance with hints of peony and musk.",
                    de: "Ein exquisiter Rosenduft mit Noten von Pfingstrose und Moschus.",
                    es: "Una fragancia de rosa exquisita con toques de peonía y almizcle.",
                    fr: "Un parfum de rose exquis avec des notes de pivoine et de musc."
                },
                originalPrice: 130,
                discountedPrice: 65,
                volumes: ["30ml", "50ml", "100ml"],
                image: "https://images.unsplash.com/photo-1557170334-a9632e77c6e4?w=500&h=500&fit=crop",
                status: "active"
            }
        ];

        let orders = [];
        let customers = [];

        document.addEventListener('DOMContentLoaded', function() {
            loadProducts();
            loadOrders();
            updateDashboard();
            
            document.getElementById('productOriginalPrice').addEventListener('input', function() {
                const originalPrice = parseFloat(this.value) || 0;
                document.getElementById('productSalePrice').value = (originalPrice * 0.5).toFixed(2);
            });

            document.getElementById('settingsForm').addEventListener('submit', function(e) {
                e.preventDefault();
                showNotification('Settings saved successfully');
            });

            document.getElementById('productForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const newProduct = {
                    id: products.length + 1,
                    brand: document.getElementById('productBrand').value,
                    name: {
                        en: document.getElementById('productNameEn').value,
                        de: document.getElementById('productNameDe').value,
                        es: document.getElementById('productNameEs').value,
                        fr: document.getElementById('productNameFr').value
                    },
                    description: {
                        en: document.getElementById('productDescEn').value,
                        de: document.getElementById('productDescDe').value,
                        es: document.getElementById('productDescEs').value,
                        fr: document.getElementById('productDescFr').value
                    },
                    originalPrice: parseFloat(document.getElementById('productOriginalPrice').value),
                    discountedPrice: parseFloat(document.getElementById('productSalePrice').value),
                    image: document.getElementById('productImage').value,
                    volumes: document.getElementById('productVolumes').value.split(',').map(v => v.trim()),
                    status: 'active'
                };

                products.push(newProduct);
                loadProducts();
                closeProductModal();
                showNotification('Product added successfully');
                updateDashboard();
            });
        });

        function showSection(sectionId) {
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            document.getElementById(sectionId).classList.add('active');

            document.querySelectorAll('.sidebar-menu a').forEach(link => {
                link.classList.remove('active');
            });
            event.target.classList.add('active');
        }

        function loadProducts() {
            const table = document.getElementById('productsTable');
            table.innerHTML = products.map(product => `
                <tr>
                    <td>
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <img src="${product.image}" alt="${product.name.en}" class="product-image-preview">
                            <div>
                                <div style="font-weight: 600;">${product.name.en}</div>
                                <div style="font-size: 12px; opacity: 0.7;">${product.volumes.join(', ')}</div>
                            </div>
                        </div>
                    </td>
                    <td>${product.brand}</td>
                    <td>€${product.originalPrice.toFixed(2)}</td>
                    <td><strong style="color: var(--primary-gold);">€${product.discountedPrice.toFixed(2)}</strong></td>
                    <td><span class="status-badge" style="background: rgba(39, 174, 96, 0.2); color: #27ae60;">Active</span></td>
                    <td>
                        <div class="action-buttons">
                            <button class="btn btn-sm btn-primary" onclick="editProduct(${product.id})">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="btn btn-sm btn-danger" onclick="deleteProduct(${product.id})">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </td>
                </tr>
            `).join('');
        }

        function openAddProductModal() {
            document.getElementById('modalTitle').textContent = 'Add New Product';
            document.getElementById('productForm').reset();
            document.getElementById('productModal').classList.add('active');
        }

        function closeProductModal() {
            document.getElementById('productModal').classList.remove('active');
        }

        function editProduct(id) {
            const product = products.find(p => p.id === id);
            if (!product) return;

            document.getElementById('modalTitle').textContent = 'Edit Product';
            document.getElementById('productBrand').value = product.brand;
            document.getElementById('productNameEn').value = product.name.en;
            document.getElementById('productNameDe').value = product.name.de;
            document.getElementById('productNameEs').value = product.name.es;
            document.getElementById('productNameFr').value = product.name.fr;
            document.getElementById('productDescEn').value = product.description.en;
            document.getElementById('productDescDe').value = product.description.de;
            document.getElementById('productDescEs').value = product.description.es;
            document.getElementById('productDescFr').value = product.description.fr;
            document.getElementById('productOriginalPrice').value = product.originalPrice;
            document.getElementById('productSalePrice').value = product.discountedPrice;
            document.getElementById('productImage').value = product.image;
            document.getElementById('productVolumes').value = product.volumes.join(', ');

            document.getElementById('productModal').classList.add('active');
        }

        function deleteProduct(id) {
            if (confirm('Are you sure you want to delete this product?')) {
                products = products.filter(p => p.id !== id);
                loadProducts();
                showNotification('Product deleted successfully');
                updateDashboard();
            }
        }

        function loadOrders() {
            const table = document.getElementById('ordersTable');
            if (orders.length === 0) {
                table.innerHTML = '<tr><td colspan="8" style="text-align: center; opacity: 0.6;">No orders found</td></tr>';
                return;
            }

            table.innerHTML = orders.map(order => `
                <tr>
                    <td>#${order.id}</td>
                    <td>${order.firstName} ${order.lastName}</td>
                    <td>${order.email}</td>
                    <td><strong style="color: var(--primary-gold);">€${order.total.toFixed(2)}</strong></td>
                    <td>
                        ${order.paymentMethod === 'crypto' ? 
                            `<span class="status-badge status-crypto"><i class="fab fa-bitcoin"></i> Crypto</span>` : 
                            `<span class="status-badge status-paid"><i class="fas fa-credit-card"></i> Standard</span>`
                        }
                    </td>
                    <td>
                        <select class="status-badge ${getStatusClass(order.status)}" style="border: none; cursor: pointer; background: transparent;" onchange="updateOrderStatus(${order.id}, this.value)">
                            <option value="new" ${order.status === 'new' ? 'selected' : ''}>New</option>
                            <option value="paid" ${order.status === 'paid' ? 'selected' : ''}>Paid</option>
                            <option value="shipped" ${order.status === 'shipped' ? 'selected' : ''}>Shipped</option>
                            <option value="crypto" ${order.status === 'crypto' ? 'selected' : ''}>Awaiting Crypto</option>
                        </select>
                    </td>
                    <td>${new Date(order.timestamp).toLocaleDateString()}</td>
                    <td>
                        <button class="btn btn-sm btn-primary" onclick="viewOrder(${order.id})">
                            <i class="fas fa-eye"></i>
                        </button>
                    </td>
                </tr>
            `).join('');
        }

        function getStatusClass(status) {
            const classes = {
                'new': 'status-new',
                'paid': 'status-paid',
                'shipped': 'status-shipped',
                'crypto': 'status-crypto'
            };
            return classes[status] || 'status-new';
        }

        function updateOrderStatus(orderId, newStatus) {
            const order = orders.find(o => o.id === orderId);
            if (order) {
                order.status = newStatus;
                loadOrders();
                showNotification('Order status updated');
                sendTelegramNotification({
                    type: 'status_update',
                    orderId: orderId,
                    status: newStatus
                });
            }
        }

        function viewOrder(orderId) {
            const order = orders.find(o => o.id === orderId);
            if (!order) return;

            const detailsHtml = `
                <div style="line-height: 1.8;">
                    <p><strong>Order ID:</strong> #${order.id}</p>
                    <p><strong>Customer:</strong> ${order.firstName} ${order.lastName}</p>
                    <p><strong>Email:</strong> ${order.email}</p>
                    <p><strong>Address:</strong> ${order.address}</p>
                    <p><strong>Payment Method:</strong> ${order.paymentMethod === 'crypto' ? 'Cryptocurrency' : 'Standard Payment'}</p>
                    ${order.wallet ? `<p><strong>Wallet:</strong> ${order.wallet}</p>` : ''}
                    <p><strong>Status:</strong> ${order.status}</p>
                    <p><strong>Date:</strong> ${new Date(order.timestamp).toLocaleString()}</p>
                    <hr style="margin: 20px 0; border: 1px solid rgba(212, 175, 55, 0.2);">
                    <h3 style="color: var(--primary-gold); margin-bottom: 15px;">Items:</h3>
                    ${order.cart.map(item => `
                        <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                            <span>${item.name} x${item.quantity}</span>
                            <span>€${(item.price * item.quantity).toFixed(2)}</span>
                        </div>
                    `).join('')}
                    <hr style="margin: 20px 0; border: 1px solid rgba(212, 175, 55, 0.2);">
                    <div style="display: flex; justify-content: space-between; font-size: 20px; font-weight: bold; color: var(--primary-gold);">
                        <span>Total:</span>
                        <span>€${order.total.toFixed(2)}</span>
                    </div>
                </div>
            `;

            document.getElementById('orderDetails').innerHTML = detailsHtml;
            document.getElementById('orderModal').classList.add('active');
        }

        function closeOrderModal() {
            document.getElementById('orderModal').classList.remove('active');
        }

        function updateDashboard() {
            const totalRevenue = orders.reduce((sum, order) => sum + order.total, 0);
            const totalOrders = orders.length;
            const totalProducts = products.length;
            const totalCustomers = customers.length;

            document.getElementById('totalRevenue').textContent = `€${totalRevenue.toFixed(2)}`;
            document.getElementById('totalOrders').textContent = totalOrders;
            document.getElementById('totalProducts').textContent = totalProducts;
            document.getElementById('totalCustomers').textContent = totalCustomers;

            const recentOrders = orders.slice(-5).reverse();
            const table = document.getElementById('recentOrdersTable');
            if (recentOrders.length === 0) {
                table.innerHTML = '<tr><td colspan="6" style="text-align: center; opacity: 0.6;">No orders yet</td></tr>';
            } else {
                table.innerHTML = recentOrders.map(order => `
                    <tr>
                        <td>#${order.id}</td>
                        <td>${order.firstName} ${order.lastName}</td>
                        <td>${order.cart.length} items</td>
                        <td>€${order.total.toFixed(2)}</td>
                        <td><span class="status-badge ${getStatusClass(order.status)}">${order.status}</span></td>
                        <td>${new Date(order.timestamp).toLocaleDateString()}</td>
                    </tr>
                `).join('');
            }
        }

        function filterProducts() {
            const searchTerm = document.getElementById('productSearch').value.toLowerCase();
            const rows = document.querySelectorAll('#productsTable tr');
            
            rows.forEach(row => {
                const text = row.textContent.toLowerCase();
                row.style.display = text.includes(searchTerm) ? '' : 'none';
            });
        }

        function filterOrders() {
            const searchTerm = document.getElementById('orderSearch').value.toLowerCase();
            const rows = document.querySelectorAll('#ordersTable tr');
            
            rows.forEach(row => {
                const text = row.textContent.toLowerCase();
                row.style.display = text.includes(searchTerm) ? '' : 'none';
            });
        }

        function sendTelegramNotification(data) {
            const token = document.getElementById('telegramToken').value;
            const chatId = document.getElementById('telegramChatId').value;

            if (!token || !chatId) {
                console.log('Telegram credentials not configured');
                return;
            }

            console.log('Telegram Notification:', data);
        }

        function showNotification(message) {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: var(--primary-gold);
                color: var(--dark-bg);
                padding: 20px 30px;
                border-radius: 10px;
                font-weight: 600;
                z-index: 10000;
                animation: slideIn 0.3s ease-out;
                box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            `;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease-out';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }

        window.addEventListener('storage', function(e) {
            if (e.key === 'newOrder') {
                const order = JSON.parse(e.newValue);
                orders.push(order);
                loadOrders();
                updateDashboard();
                showNotification('New order received!');
                sendTelegramNotification({
                    type: 'new_order',
                    order: order
                });
            }
        });
    </script>
</body>
</html>
